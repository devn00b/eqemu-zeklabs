sub EVENT_SIGNAL {
if ( $signal == 1 )
{
	quest::settimer("spawn",10);
	quest::stoptimer("resetzone");
}
}

sub EVENT_TIMER {
if ( $timer eq "spawn" )
{
my @nlist = $entity_list->GetNPCList();
my $size = scalar @nlist;
if ( $size > 300 )
{
quest::stoptimer("spawn");
quest::settimer("spawn",900);
return;
}
else
{
#skeleton leader spawn
quest::spawn2(4108,106,0,490,4092,2.4,180.5);
}

#do rain here cause setting sky color at the same time borks it
quest::rain(1);
quest::stoptimer("spawn");
quest::settimer("spawn2",30);

#my $questNPC = $entity_list->GetNPCByNPCTypeID(999264);

#if ( !$questNPC )
#{
#quest npc spawn
#quest::spawn2(999264,0,0,142,-210,-4,196.5);

my $guardNPC = $entity_list->GetNPCByNPCTypeID(2097);

if ( !$guardNPC )
{
#quest npc spawn
quest::spawn2(2097,114,0,150,-230,-4,196.5);
}
#}

#front line skeletal conscripts  lvl 12
quest::spawn2(4129,107,0,405.2,4216,-1.2,127.6);
quest::spawn2(4129,107,0,393.5,4216.2,-2.4,127.6);
quest::spawn2(4129,107,0,382.9,4216.0,-3.4,127.6);
quest::spawn2(4129,107,0,370.8,4216.0,-4.2,127.6);
quest::spawn2(4129,107,0,359.4,4216,-4.2,127.6);
quest::spawn2(4129,107,0,346.8,4216,-4.1,127.6);

quest::spawn2(4129,109,0,405.2,4226,-1.2,127.6);
quest::spawn2(4129,109,0,393.5,4226.2,-2.4,127.6);
quest::spawn2(4129,109,0,382.9,4226.0,-3.4,127.6);
quest::spawn2(4129,109,0,370.8,4226.0,-4.2,127.6);
quest::spawn2(4129,109,0,359.4,4226,-4.2,127.6);
quest::spawn2(4129,109,0,346.8,4226,-4.1,127.6);

quest::spawn2(448167,108,0,405.2,4236,-1.2,127.6);
quest::spawn2(448167,108,0,393.5,4236.2,-2.4,127.6);
quest::spawn2(448167,108,0,382.9,4236.0,-3.4,127.6);
quest::spawn2(448167,108,0,370.8,4236.0,-4.2,127.6);
quest::spawn2(448167,108,0,359.4,4236,-4.2,127.6);
quest::spawn2(448167,108,0,346.8,4236,-4.1,127.6);

quest::spawn2(14021,109,0,405.2,4196,-1.2,127.6);
quest::spawn2(14021,109,0,393.5,4196.2,-2.4,127.6);
quest::spawn2(14021,109,0,382.9,4196.0,-3.4,127.6);
quest::spawn2(14021,109,0,370.8,4196.0,-4.2,127.6);
quest::spawn2(14021,109,0,359.4,4196,-4.2,127.6);
quest::spawn2(14021,109,0,346.8,4196,-4.1,127.6);

#front line skeleton footsoldiers lvl 22
quest::spawn2(4101,107,0,405.2,4186,-1.2,127.6);
quest::spawn2(4101,107,0,393.5,4186.2,-2.4,127.6);
quest::spawn2(4101,107,0,382.9,4186.0,-3.4,127.6);
quest::spawn2(4101,107,0,370.8,4186.0,-4.2,127.6);
quest::spawn2(4101,107,0,359.4,4186,-4.2,127.6);
quest::spawn2(4101,107,0,346.8,4186,-4.1,127.6);

quest::spawn2(4128,108,0,405.2,4176,-1.2,127.6);
quest::spawn2(4128,108,0,393.5,4176.2,-2.4,127.6);
quest::spawn2(4128,108,0,382.9,4176.0,-3.4,127.6);
quest::spawn2(4128,108,0,370.8,4176.0,-4.2,127.6);
quest::spawn2(4128,108,0,359.4,4176,-4.2,127.6);
quest::spawn2(4128,108,0,346.8,4176,-4.1,127.6);

quest::spawn2(4128,109,0,405.2,4166,-1.2,127.6);
quest::spawn2(4128,109,0,393.5,4166.2,-2.4,127.6);
quest::spawn2(4128,109,0,382.9,4166.0,-3.4,127.6);
quest::spawn2(4128,109,0,370.8,4166.0,-4.2,127.6);
quest::spawn2(4128,109,0,359.4,4166,-4.2,127.6);
quest::spawn2(4128,109,0,346.8,4166,-4.1,127.6);
}
elsif( $timer eq "spawn2" )
{
quest::setsky(0,254,10,0);
quest::stoptimer("spawn2");
quest::settimer("spawn3",30);
#front line skeletal conscripts  lvl 12
quest::spawn2(4129,107,0,405.2,4216,-1.2,127.6);
quest::spawn2(4129,107,0,393.5,4216.2,-2.4,127.6);
quest::spawn2(4129,107,0,382.9,4216.0,-3.4,127.6);
quest::spawn2(4129,107,0,370.8,4216.0,-4.2,127.6);
quest::spawn2(4129,107,0,359.4,4216,-4.2,127.6);
quest::spawn2(4129,107,0,346.8,4216,-4.1,127.6);

quest::spawn2(4128,109,0,405.2,4226,-1.2,127.6);
quest::spawn2(4128,109,0,393.5,4226.2,-2.4,127.6);
quest::spawn2(4128,109,0,382.9,4226.0,-3.4,127.6);
quest::spawn2(4128,109,0,370.8,4226.0,-4.2,127.6);
quest::spawn2(4128,109,0,359.4,4226,-4.2,127.6);
quest::spawn2(4128,109,0,346.8,4226,-4.1,127.6);

quest::spawn2(4128,108,0,405.2,4236,-1.2,127.6);
quest::spawn2(4128,108,0,393.5,4236.2,-2.4,127.6);
quest::spawn2(4128,108,0,382.9,4236.0,-3.4,127.6);
quest::spawn2(4128,108,0,370.8,4236.0,-4.2,127.6);
quest::spawn2(4128,108,0,359.4,4236,-4.2,127.6);
quest::spawn2(4128,108,0,346.8,4236,-4.1,127.6);

#front line skeleton troopers  lvl 27
quest::spawn2(4128,109,0,405.2,4196,-1.2,127.6);
quest::spawn2(4128,109,0,393.5,4196.2,-2.4,127.6);
quest::spawn2(4128,109,0,382.9,4196.0,-3.4,127.6);
quest::spawn2(4128,109,0,370.8,4196.0,-4.2,127.6);
quest::spawn2(4128,109,0,359.4,4196,-4.2,127.6);
quest::spawn2(4128,109,0,346.8,4196,-4.1,127.6);

#front line skeleton footsoldiers lvl 22
quest::spawn2(4101,107,0,405.2,4186,-1.2,127.6);
quest::spawn2(4101,107,0,393.5,4186.2,-2.4,127.6);
quest::spawn2(4101,107,0,382.9,4186.0,-3.4,127.6);
quest::spawn2(4101,107,0,370.8,4186.0,-4.2,127.6);
quest::spawn2(4101,107,0,359.4,4186,-4.2,127.6);
quest::spawn2(4101,107,0,346.8,4186,-4.1,127.6);


quest::spawn2(4145,108,0,405.2,4176,-1.2,127.6);
quest::spawn2(4145,108,0,393.5,4176.2,-2.4,127.6);
quest::spawn2(4145,108,0,382.9,4176.0,-3.4,127.6);
quest::spawn2(4145,108,0,370.8,4176.0,-4.2,127.6);
quest::spawn2(4145,108,0,359.4,4176,-4.2,127.6);
quest::spawn2(4145,108,0,346.8,4176,-4.1,127.6);

quest::spawn2(4145,109,0,405.2,4166,-1.2,127.6);
quest::spawn2(4145,109,0,393.5,4166.2,-2.4,127.6);
quest::spawn2(4145,109,0,382.9,4166.0,-3.4,127.6);
quest::spawn2(4145,109,0,370.8,4166.0,-4.2,127.6);
quest::spawn2(4145,109,0,359.4,4166,-4.2,127.6);
quest::spawn2(4145,109,0,346.8,4166,-4.1,127.6);
}
elsif( $timer eq "spawn3" )
{
quest::setsky(0,254,10,0);

quest::settimer("spawn4",30);
quest::stoptimer("spawn3");

#front line skeletal conscripts  lvl 12
quest::spawn2(448167,110,0,405.2,4216,-1.2,127.6);
quest::spawn2(448167,110,0,393.5,4216.2,-2.4,127.6);
quest::spawn2(448167,110,0,382.9,4216.0,-3.4,127.6);
quest::spawn2(448167,110,0,370.8,4216.0,-4.2,127.6);
quest::spawn2(448167,110,0,359.4,4216,-4.2,127.6);
quest::spawn2(448167,110,0,346.8,4216,-4.1,127.6);

quest::spawn2(4129,110,0,405.2,4226,-1.2,127.6);
quest::spawn2(4129,110,0,393.5,4226.2,-2.4,127.6);
quest::spawn2(4129,110,0,382.9,4226.0,-3.4,127.6);
quest::spawn2(4129,110,0,370.8,4226.0,-4.2,127.6);
quest::spawn2(4129,110,0,359.4,4226,-4.2,127.6);
quest::spawn2(4129,110,0,346.8,4226,-4.1,127.6);

quest::spawn2(999667,110,0,405.2,4236,-1.2,127.6);
quest::spawn2(999667,110,0,393.5,4236.2,-2.4,127.6);
quest::spawn2(999667,110,0,382.9,4236.0,-3.4,127.6);
quest::spawn2(999667,110,0,370.8,4236.0,-4.2,127.6);
quest::spawn2(999667,110,0,359.4,4236,-4.2,127.6);
quest::spawn2(999667,110,0,346.8,4236,-4.1,127.6);

#front line skeleton footsoldiers lvl 22
quest::spawn2(4101,110,0,405.2,4186,-1.2,127.6);
quest::spawn2(4101,110,0,393.5,4186.2,-2.4,127.6);
quest::spawn2(4101,110,0,382.9,4186.0,-3.4,127.6);
quest::spawn2(4101,110,0,370.8,4186.0,-4.2,127.6);
quest::spawn2(4101,110,0,359.4,4186,-4.2,127.6);
quest::spawn2(4101,110,0,346.8,4186,-4.1,127.6);

quest::spawn2(14021,110,0,405.2,4176,-1.2,127.6);
quest::spawn2(14021,110,0,393.5,4176.2,-2.4,127.6);
quest::spawn2(14021,110,0,382.9,4176.0,-3.4,127.6);
quest::spawn2(14021,110,0,370.8,4176.0,-4.2,127.6);
quest::spawn2(14021,110,0,359.4,4176,-4.2,127.6);
quest::spawn2(14021,110,0,346.8,4176,-4.1,127.6);

}
elsif( $timer eq "spawn4" )
{
quest::stoptimer("spawn4");
quest::settimer("spawn5",30);
#front line skeletal monks  lvl 23
quest::spawn2(50263,111,0,405.2,4216,-1.2,127.6);
quest::spawn2(50263,111,0,393.5,4216.2,-2.4,127.6);
quest::spawn2(50263,111,0,382.9,4216.0,-3.4,127.6);
quest::spawn2(50263,111,0,370.8,4216.0,-4.2,127.6);
quest::spawn2(50263,111,0,359.4,4216,-4.2,127.6);
quest::spawn2(50263,111,0,346.8,4216,-4.1,127.6);

quest::spawn2(50263,111,0,405.2,4226,-1.2,127.6);
quest::spawn2(50263,111,0,393.5,4226.2,-2.4,127.6);
quest::spawn2(50263,111,0,382.9,4226.0,-3.4,127.6);
quest::spawn2(50263,111,0,370.8,4226.0,-4.2,127.6);
quest::spawn2(50263,111,0,359.4,4226,-4.2,127.6);
quest::spawn2(50263,111,0,346.8,4226,-4.1,127.6);

quest::spawn2(21146,111,0,405.2,4236,-1.2,127.6);
quest::spawn2(21146,111,0,393.5,4236.2,-2.4,127.6);
quest::spawn2(21146,111,0,382.9,4236.0,-3.4,127.6);
quest::spawn2(21146,111,0,370.8,4236.0,-4.2,127.6);
quest::spawn2(21146,111,0,359.4,4236,-4.2,127.6);
quest::spawn2(21146,111,0,346.8,4236,-4.1,127.6);

quest::spawn2(30019,111,0,405.2,4186,-1.2,127.6);
quest::spawn2(30019,111,0,393.5,4186.2,-2.4,127.6);
quest::spawn2(30019,111,0,382.9,4186.0,-3.4,127.6);
quest::spawn2(30019,111,0,370.8,4186.0,-4.2,127.6);
quest::spawn2(30019,111,0,359.4,4186,-4.2,127.6);
quest::spawn2(30019,111,0,346.8,4186,-4.1,127.6);

quest::spawn2(999667,111,0,405.2,4176,-1.2,127.6);
quest::spawn2(999667,111,0,393.5,4176.2,-2.4,127.6);
quest::spawn2(999667,111,0,382.9,4176.0,-3.4,127.6);
quest::spawn2(999667,111,0,370.8,4176.0,-4.2,127.6);
quest::spawn2(999667,111,0,359.4,4176,-4.2,127.6);
quest::spawn2(999667,111,0,346.8,4176,-4.1,127.6);

quest::spawn2(999666,111,0,405.2,4166,-1.2,127.6);
quest::spawn2(999666,111,0,393.5,4166.2,-2.4,127.6);
quest::spawn2(999666,111,0,382.9,4166.0,-3.4,127.6);
quest::spawn2(999666,111,0,370.8,4166.0,-4.2,127.6);
quest::spawn2(999666,111,0,359.4,4166,-4.2,127.6);
quest::spawn2(999666,111,0,346.8,4166,-4.1,127.6);
}
elsif( $timer eq "spawn5" )
{
quest::stoptimer("spawn5");
quest::settimer("spawn",900);
#quest::settimer("resetzone",21600);
#front line skeletal monks  lvl 23
quest::spawn2(30019,111,0,405.2,4216,-1.2,127.6);
quest::spawn2(30019,111,0,393.5,4216.2,-2.4,127.6);
quest::spawn2(30019,111,0,382.9,4216.0,-3.4,127.6);
quest::spawn2(30019,111,0,370.8,4216.0,-4.2,127.6);
quest::spawn2(30019,111,0,359.4,4216,-4.2,127.6);
quest::spawn2(30019,111,0,346.8,4216,-4.1,127.6);

quest::spawn2(12186,111,0,405.2,4226,-1.2,127.6);
quest::spawn2(12186,111,0,393.5,4226.2,-2.4,127.6);
quest::spawn2(12186,111,0,382.9,4226.0,-3.4,127.6);
quest::spawn2(12186,111,0,370.8,4226.0,-4.2,127.6);
quest::spawn2(12186,111,0,359.4,4226,-4.2,127.6);
quest::spawn2(12186,111,0,346.8,4226,-4.1,127.6);

quest::spawn2(12186,111,0,405.2,4236,-1.2,127.6);
quest::spawn2(12186,111,0,393.5,4236.2,-2.4,127.6);
quest::spawn2(12186,111,0,382.9,4236.0,-3.4,127.6);
quest::spawn2(12186,111,0,370.8,4236.0,-4.2,127.6);
quest::spawn2(12186,111,0,359.4,4236,-4.2,127.6);
quest::spawn2(12186,111,0,346.8,4236,-4.1,127.6);

#front line skeleton footsoldiers lvl 22
quest::spawn2(12186,111,0,405.2,4186,-1.2,127.6);
quest::spawn2(12186,111,0,393.5,4186.2,-2.4,127.6);
quest::spawn2(12186,111,0,382.9,4186.0,-3.4,127.6);
quest::spawn2(12186,111,0,370.8,4186.0,-4.2,127.6);
quest::spawn2(12186,111,0,359.4,4186,-4.2,127.6);
quest::spawn2(12186,111,0,346.8,4186,-4.1,127.6);

quest::spawn2(999666,111,0,405.2,4176,-1.2,127.6);
quest::spawn2(999666,111,0,393.5,4176.2,-2.4,127.6);
quest::spawn2(999666,111,0,382.9,4176.0,-3.4,127.6);
quest::spawn2(999666,111,0,370.8,4176.0,-4.2,127.6);
quest::spawn2(999666,111,0,359.4,4176,-4.2,127.6);
quest::spawn2(999666,111,0,346.8,4176,-4.1,127.6);

#front line skeletal troopers (red) lvl 29
quest::spawn2(12186,111,0,405.2,4166,-1.2,127.6);
quest::spawn2(12186,111,0,393.5,4166.2,-2.4,127.6);
quest::spawn2(12186,111,0,382.9,4166.0,-3.4,127.6);
quest::spawn2(12186,111,0,370.8,4166.0,-4.2,127.6);
quest::spawn2(12186,111,0,359.4,4166,-4.2,127.6);
quest::spawn2(12186,111,0,346.8,4166,-4.1,127.6);
}

elsif( $timer eq "resetzone" )
{
quest::stoptimer("resetzone");
quest::setsky(1,0,100,125);
quest::rain(0);
}

}

sub EVENT_SAY {
quest::say("hi!");
}